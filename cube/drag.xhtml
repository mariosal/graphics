<?xml version='1.0' ?>
<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
    <head>
        <title>3D Cube Dragging</title>

        <link href='../css/style.css' rel='stylesheet' type='text/css' />
        <style>
            canvas {
                cursor: move;
            }
        </style>
    </head>

    <body>
        <canvas width='500' height='500'></canvas>

        <script src='../libs/sylvester.js' type='application/javascript'></script>
        <script src='array.js' type='application/javascript'></script>
        <script src='cube.js' type='application/javascript'></script>
        <script src='render.js' type='application/javascript'></script>
        <script type='application/javascript'>
            <![CDATA[
                var render = new Render(
                    document.querySelector( 'canvas' ).getContext( '2d' )
                );
                render.ctx.translate( render.WIDTH / 2, render.HEIGHT / 2 );

                var rotateCube = new Cube();
                var projectCube = new Cube();

                projectCube.vertices = rotateCube.vertices.copy();
                projectCube.project();
                render.draw( projectCube );

                var mouse;
                document.onmousedown = function ( e ) {
                    if ( e.which == 1 ) {
                        mouse = [ e.clientX, e.clientY ];

                        document.onmousemove = function ( e ) {
                            thetaX = -( mouse[ 1 ] - e.clientY ) / 50;
                            thetaY =  ( mouse[ 0 ] - e.clientX ) / 50;
                            rotateCube.rotateX( thetaX );
                            rotateCube.rotateY( thetaY );

                            projectCube.vertices = rotateCube.vertices.copy();
                            projectCube.project();
                            render.draw( projectCube );

                            mouse = [ e.clientX, e.clientY ];
                        };
                    }
                };
                document.onmouseup = function () {
                    document.onmousemove = function () {
                    };
                };
            ]]>
        </script>
    </body>
</html>
